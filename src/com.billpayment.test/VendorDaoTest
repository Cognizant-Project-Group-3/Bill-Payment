package com.billpayment.test;

import java.sql.SQLException;

import junit.framework.Assert;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;

import com.billpayment.dao.VendorDAO;
import com.billpayment.entity.Vendor;

public class VendorDaoTest {
	VendorDAO vendorDao;
	Vendor vendor;

	@Before
	public void setUp() throws Exception {
		vendorDao=new VendorDAO();
		System.out.println("Before");
	}

	@After
	public void tearDown() throws Exception {
		vendorDao=null;
		System.out.println("After");
	}

	@Test
	public void testInsertRecordPositive()  {
		
		vendor=new Vendor();
		
		vendor.setVendor_id(10);
		
		System.out.println("Insert test + ");
		vendor.setAddress("cdc");
		vendor.setAmount(2f);
		vendor.setCertificate_issue_date("01-JAN-2000");
		vendor.setCertificate_validity_date("02-JAN-2010");
		vendor.setCompany_reg_no("p1");
		vendor.setContact_no("9988776655");
		vendor.setCountry("India");
		
		vendor.setEmailid("a@b.com");
		vendor.setEmployee_count(20);
		vendor.setName("sdf");
		vendor.setState("Assam");
		vendor.setType("Tax");
		
		vendor.setWebsite("www.sdf.com");
		vendor.setYoe(2010);
		vendor.setYos(2015);
		
		int status = 0;
		try{
			status=vendorDao.insertRecord(vendor);
			System.out.println("status = " + status);
			
		}catch(ClassNotFoundException cnfe){
			System.out.println(cnfe.getMessage());
		}catch (SQLException se) {
			System.out.println(se.getMessage());
		}
		Assert.assertEquals(1, status);
	}

	//@Ignore
	@Test(expected=SQLException.class)
	public void testInsertRecordNegative() throws ClassNotFoundException, SQLException {
		
		vendor=new Vendor();
		
		vendor.setVendor_id(10);
		
		System.out.println("Insert test -");
		vendor.setAddress("cdc");
		vendor.setAmount(2f);
		vendor.setCertificate_issue_date("01-JAN-2000");
		vendor.setCertificate_validity_date("02-JAN-2010");
		vendor.setCompany_reg_no("p1");
		vendor.setContact_no("9988776655");
		vendor.setCountry("India");
	
		vendor.setEmailid("a@b.com");
		vendor.setEmployee_count(20);
		vendor.setName("sdf");
		vendor.setState("Assam");
		vendor.setType("Tax");
		
		vendor.setWebsite("www.sdf.com");
		vendor.setYoe(2010);
		vendor.setYos(2015);
		
		
	    vendorDao.insertRecord(vendor);
	}
	
	@Test
	public void testFetchVendorDetailsPositive(){
		System.out.println("Fetch test +");
		
		vendor=new Vendor();
		
		try{
		vendor=vendorDao.fetchVendorDetails(1041);
		
		Assert.assertEquals("aircel", vendor.getName());
		Assert.assertEquals("aircel1234",vendor.getCompany_reg_no());
		Assert.assertEquals("Telephone", vendor.getType());
		Assert.assertEquals("S B ROAD", vendor.getAddress());
		Assert.assertEquals("Maharashtra", vendor.getState());
		Assert.assertEquals("aircel@gmail.com", vendor.getEmailid());
		Assert.assertEquals("9552540007", vendor.getContact_no());
		Assert.assertEquals("aircel.com", vendor.getWebsite());
		Assert.assertEquals("1992-12-20", vendor.getCertificate_issue_date());
		Assert.assertEquals("2022-11-22", vendor.getCertificate_validity_date());
		Assert.assertEquals(900, vendor.getEmployee_count());
		Assert.assertEquals(1991, vendor.getYoe());
	
		}catch(ClassNotFoundException cnfe){
			
			System.out.println(cnfe.getMessage());
		
		}catch(SQLException se){
		
			System.out.println(se.getMessage());
		}
	
	}
	
	
	}

