package com.billpayment.test;

import java.sql.SQLException;

import junit.framework.Assert;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;

import com.billpayment.dao.CustomerDAO;
import com.billpayment.entity.Customer;

public class CustomerDaoTest {
	CustomerDAO customerDao;
	Customer customer;

	@Before
	public void setUp() throws Exception {
		customerDao=new CustomerDAO();
		System.out.println("before");
	}

	@After
	public void tearDown() throws Exception {
		customerDao=null;
		System.out.println("after");
		
	}

	@Test
	public void testInsertRecordPositive(){
		customer=new Customer();
		int status1=0;
		int status2=0;
		System.out.println("insert+");
		
		customer.setAddress("cdc");
		customer.setCardNo(123);
		customer.setContactNo("9876543210");
		customer.setCountryName("India");
		customer.setDocumentdetailnumber("ab12");
		customer.setDocumentNo("PASS12345");
		customer.setEmail("x@y.com");
		customer.setCustid(16);
		customer.setName("my_name");
		customer.setStateName("Assam");
		customer.setVendorName("sdf");
		customer.setVendorType("Tax");
		
		
		
		try{
			
			status1=customerDao.insertCustRecord(customer);
			System.out.println("status1 = " + status1);
			
			status2=customerDao.insertCVMaster(customer);
			System.out.println("status2 = " + status2);
			
			
		}catch(ClassNotFoundException cnfe){
			System.out.println(cnfe.getMessage());
		}catch (SQLException se) {
			System.out.println(se.getMessage());
		}
		Assert.assertEquals(1, (status1*status2));
	}
	
	
	@Test(expected=SQLException.class)
	public void testInsertRecordNegative() throws ClassNotFoundException, SQLException {
		customer=new Customer();
		System.out.println("insert -");
		
		customer.setAddress("cdc");
		customer.setCardNo(123);
		customer.setContactNo("9876543210");
		customer.setCountryName("India");
		customer.setDocumentdetailnumber("ab12");
		customer.setDocumentName("passport");
		customer.setEmail("x@y.com");
		customer.setCustid(16);
		customer.setName("my_name");
		customer.setStateName("Assam");
		customer.setVendorName("sdf");
		customer.setVendorType("Tax");
		
		
		
		customerDao.insertCustRecord(customer);
	}
	
	@Test
	public void testFetchCustomerDetails() {
         System.out.println("Fetch test +");
		
         customer=new Customer();
		
		try{
			customer=customerDao.fetchCustomerDetails(105);
			Assert.assertEquals("Anisha", customer.getName());
			Assert.assertEquals("955254007", customer.getContactNo());
			Assert.assertEquals("S B ROAD", customer.getAddress());
			Assert.assertEquals("anigaikwad@gmail.com", customer.getEmail());
			Assert.assertEquals(98765, customer.getCardNo());
			
	
		}catch(ClassNotFoundException cnfe){
			
			System.out.println(cnfe.getMessage());
		
		}catch(SQLException se){
		
			System.out.println(se.getMessage());
		}
	
		
	}

}
